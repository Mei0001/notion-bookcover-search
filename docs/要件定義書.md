# 要件定義書

**書籍検索・表紙画像URL取得ツール（Notion埋め込み用）**

---

## 1. 背景・目的（Why）

### 背景

- Notionの「ファイルとメディア」プロパティに書籍表紙を設定する際、
  - Amazonで書籍検索
  - 表紙画像を探す
  - URLを取得して貼り付け  
  という作業が手動・反復的で、認知負荷が高い。
- Notionには「書籍名 → 表紙画像を自動取得」する標準機能が存在しない。

### 目的

- 書籍名を入力するだけで
- 該当する書籍候補を一覧表示し
- 1冊選択するだけで表紙画像URLをクリップボードにコピーできる
- これをNotion上に埋め込んで利用可能にし、本棚DB運用の手間を最小化する。

---

## 2. 想定ユーザー・利用シーン（Who / When）

### 想定ユーザー

- Notionで本棚・読書ログDBを運用する個人ユーザー
- 学生、エンジニア、ナレッジ管理を重視するユーザー
- 主にMacユーザー（ただしOS非依存）

### 利用シーン

- Notionで本棚DBを編集している最中
- 「ファイルとメディア」欄に表紙画像を設定したい
- Amazon検索を別タブで行わず、その場で完結させたい

---

## 3. システム構成（How：全体像）

### 全体構成

- 外部ホストされたWebページ（HTML + JavaScript）
- 書籍検索APIをフロントエンドから利用
- HTTPSで公開し、Notionの `/embed` 機能で埋め込み表示

Notion
  └─ /embed
       └─ 書籍検索ツール（外部HTML）
             ├─ 書籍名入力
             ├─ API検索
             ├─ 候補表示
             └─ 表紙画像URLをクリップボードへコピー

---

## 4. 機能要件（Functional Requirements）

### 4.1 書籍検索機能

- ユーザーが書籍名を入力できる（部分一致可）
- 入力をトリガーに書籍検索APIを呼び出す
- 日本語書籍に対応すること

**必須条件**

- 書籍名のみで検索可能
- 複数候補を返却できること

---

### 4.2 検索結果表示機能

- 検索結果を一覧形式で表示
- 各書籍候補に以下を表示する：
  - 表紙サムネイル画像
  - 書籍タイトル
  - 著者名（取得可能な場合）
  - 出版年（任意）

**UI要件**

- 一目で書籍を判別できること
- Notion埋め込みサイズでも視認性を保つこと

---

### 4.3 書籍選択機能

- ユーザーが候補一覧から1冊をクリックして選択できること
- 選択時に後続処理（URLコピー）が実行されること

---

### 4.4 表紙画像URLコピー機能（コア機能）

- 選択された書籍の表紙画像URLをクリップボードにコピーする
- コピー対象URLは以下を満たすこと：
  - 直接画像として参照可能なURL
  - Notionの「ファイルとメディア」に貼り付け可能

**UX要件**

- コピー成功時に視覚的フィードバックを表示（例：「Copied!」）

---

## 5. 非機能要件（Non-Functional Requirements）

### 5.1 Notion埋め込み対応

- Notionの `/embed` で正常に表示されること
- iframe制限に抵触しないこと
- HTTPSで提供されること

---

### 5.2 パフォーマンス

- 検索応答時間は概ね1〜2秒以内
- ページロードは軽量であること（SPA必須ではない）

---

### 5.3 セキュリティ

- APIキーを使用する場合：
  - フロントエンドに露出しても問題ないAPIのみ利用  
  または  
  - 将来的にProxy化できる構成を前提とする
- 個人情報は一切扱わない

---

### 5.4 可用性・保守性

- 静的ホスティングで稼働可能であること
- サーバ管理・運用コストが低い構成であること

---

## 6. 技術要件（Technical Requirements）

### フロントエンド

- HTML / CSS / JavaScript
- フレームワーク使用は任意
- Clipboard API を使用

### 外部API（候補）

- Google Books API  
- openBD（日本語書籍向け）

### ホスティング

- Vercel / Cloudflare Pages / GitHub Pages 等
- HTTPS必須

---

## 7. 非要件（Out of Scope）

以下は本ツールのスコープ外とする：

- Amazon公式画像の直接取得
- Notion APIを用いた自動書き込み
- ユーザー認証・ログイン機能
- 本棚DBそのものの管理機能
- 画像ファイルのNotionへの直接アップロード

---

## 8. 将来拡張（Optional / Future）

- ISBNの同時コピー
- タイトル・著者・ISBNをJSON形式でコピー
- Notion API連携による自動反映
- Google Books / openBD の切り替え機能
- Raycast・Chrome拡張への派生

---

## 9. 成功条件（Definition of Done）

- 書籍名入力 → 候補表示 → 1クリックで表紙画像URLをコピーできる
- コピーしたURLをNotionの「ファイルとメディア」に貼ると正しく表示される
- Notionに埋め込んで違和感なく使用できる

